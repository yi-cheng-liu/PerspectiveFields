# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/door/images/dslr_images/DSC_0502.JPG --output output/eth3d/door/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/door/images/dslr_images/DSC_0504.JPG --output output/eth3d/door/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/door/images/dslr_images/DSC_0506.JPG --output output/eth3d/door/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth

# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/exhibition_hall/images/dslr_images/DSC_1746.JPG --output output/eth3d/exhibition_hall/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/exhibition_hall/images/dslr_images/DSC_1759.JPG --output output/eth3d/exhibition_hall/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/exhibition_hall/images/dslr_images/DSC_1771.JPG --output output/eth3d/exhibition_hall/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth

# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/lecture_room/images/dslr_images/DSC_0903.JPG --output output/eth3d/lecture_room/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/lecture_room/images/dslr_images/DSC_0907.JPG --output output/eth3d/lecture_room/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/lecture_room/images/dslr_images/DSC_0917.JPG --output output/eth3d/lecture_room/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth

# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/lounge/images/dslr_images/DSC_1097.JPG --output output/eth3d/lounge/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/lounge/images/dslr_images/DSC_1099.JPG --output output/eth3d/lounge/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/lounge/images/dslr_images/DSC_1100.JPG --output output/eth3d/lounge/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth

# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/observatory/images/dslr_images/DSC_0997.JPG --output output/eth3d/observatory/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/observatory/images/dslr_images/DSC_1003.JPG --output output/eth3d/observatory/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/observatory/images/dslr_images/DSC_1012.JPG --output output/eth3d/observatory/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth

# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/old_computer/images/dslr_images/DSC_1128.JPG --output output/eth3d/old_computer/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/old_computer/images/dslr_images/DSC_1148.JPG --output output/eth3d/old_computer/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/old_computer/images/dslr_images/DSC_1167.JPG --output output/eth3d/old_computer/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth

# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/statue/images/dslr_images/DSC_0493.JPG --output output/eth3d/statue/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/statue/images/dslr_images/DSC_0495.JPG --output output/eth3d/statue/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/statue/images/dslr_images/DSC_0498.JPG --output output/eth3d/statue/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth

# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/terrace_2/images/dslr_images/DSC_1462.JPG --output output/eth3d/terrace_2/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/terrace_2/images/dslr_images/DSC_1465.JPG --output output/eth3d/terrace_2/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/terrace_2/images/dslr_images/DSC_1468.JPG --output output/eth3d/terrace_2/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth

# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/botanical_garden/images/dslr_images/DSC_0848.JPG --output output/eth3d/botanical_garden/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/botanical_garden/images/dslr_images/DSC_0853.JPG --output output/eth3d/botanical_garden/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/botanical_garden/images/dslr_images/DSC_0873.JPG --output output/eth3d/botanical_garden/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth

# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/living_room/images/dslr_images/DSC_1556.JPG --output output/eth3d/living_room/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/living_room/images/dslr_images/DSC_1569.JPG --output output/eth3d/living_room/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth
# python demo/demo.py --config-file models/paramnet_360cities_edina_rpf.yaml --input datasets/eth3d/living_room/images/dslr_images/DSC_1573.JPG --output output/eth3d/living_room/ --opts MODEL.WEIGHTS models/paramnet_360cities_edina_rpf.pth


BASE_DIR="datasets/eth3d"
CONFIG_FILE="models/paramnet_360cities_edina_rpf.yaml"
WEIGHTS="models/paramnet_360cities_edina_rpf.pth"
OUTPUT_BASE_DIR="output/eth3d"

for SUBDIR in $BASE_DIR/*; do
    if [ -d "${SUBDIR}/images/dslr_images" ]; then
        FOLDER_NAME=$(basename $SUBDIR)

        INPUT="${SUBDIR}/images/dslr_images_resized/*.JPG"

        OUTPUT="${OUTPUT_BASE_DIR}/${FOLDER_NAME}/"

        python demo/demo.py --config-file $CONFIG_FILE --input "$INPUT" --output "$OUTPUT" --opts MODEL.WEIGHTS $WEIGHTS

        echo "Processed $FOLDER_NAME"
    fi
done

echo "All folders processed."

